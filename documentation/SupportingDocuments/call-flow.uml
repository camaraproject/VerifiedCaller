@startuml

title VerifiedCaller

autonumber "<font color=blue><b>[00]"
hide footbox

' ---------------

participant CC
box Operator network
    participant CSCF
    participant TAS as "VerifyCall\nSystem"
endbox
participant endpoint

== Onboarding ==

-> CC: register
activate CC
CC -> TAS: **onboard**
activate TAS
return ok
deactivate CC

== Call verification ==

-> CC: call
activate CC

group CAMARA scope

CC -> TAS: **POST /verifyCall**\n\
  A-number\n\
  B-number\n\
  brandId
  
activate TAS
return **200 OK**\n\
  TTL\n\
  token

end group
  
CC-> CSCF: **INVITE**\n\
  A-number\n\
  B-number
activate CSCF

CSCF->TAS: validate call
activate TAS
return ok

note over TAS
  Based on the covered
  validations, different
  levels of attesitation
  are possible
end note
  
CSCF -> endpoint: **INVITE**\n\
  A-number\n\
  B-number\n\
  RCD (branding)
activate endpoint

endpoint -> : <size:30><&circle-check>\nBranded ringing

@enduml